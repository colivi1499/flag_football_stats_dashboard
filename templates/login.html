<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Login / Sign Up</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: system-ui, sans-serif; background: #f5f7fa; display: flex; align-items: center; justify-content: center; height: 100vh; margin:0; }
    .auth-container { background:white; padding:2rem; width:320px; border-radius:8px; box-shadow:0 10px 25px rgba(0,0,0,0.1);}
    h1 { text-align:center; margin-bottom:1rem; }
    input { width:100%; padding:0.6rem; margin-bottom:0.8rem; border-radius:4px; border:1px solid #ccc; }
    button { width:100%; padding:0.6rem; margin-bottom:0.5rem; border:none; border-radius:4px; cursor:pointer; font-weight:600; }
    .login-btn { background:#2563eb; color:white; }
    .signup-btn { background:#16a34a; color:white; }
    .message { margin-top:0.5rem; text-align:center; font-size:0.9rem; }
  </style>
</head>
<body>

<div class="auth-container">
  <h1>Flag Football</h1>
  <input id="email" type="email" placeholder="Email" />
  <input id="password" type="password" placeholder="Password" />
  <button class="login-btn" onclick="login()">Login</button>
  <button class="signup-btn" onclick="signup()">Sign Up</button>
  <div id="message" class="message"></div>
</div>

<script type="module">
  import { SUPABASE_URL, SUPABASE_ANON_KEY } from './config.js';
  import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

  const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
  const messageEl = document.getElementById("message");

  function showMessage(text, color="red") {
    messageEl.textContent = text;
    messageEl.style.color = color;
  }

  async function login() {
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value.trim();
    if (!email || !password) return showMessage("Please enter email and password.");

    const { error } = await supabase.auth.signInWithPassword({ email, password });
    if (error) showMessage(error.message);
    else {
      showMessage("Logged in successfully!", "green");
      window.location.href = "index.html";
    }
  }

  async function signup() {
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value.trim();
    if (!email || !password) return showMessage("Please enter email and password.");

    const { error } = await supabase.auth.signUp({ email, password });
    if (error) showMessage(error.message);
    else showMessage("Check your email to confirm your account.", "green");
  }

  // Expose to global scope
  window.login = login;
  window.signup = signup;
</script>

</body>
</html>
